-- Load WindUI (Advanced Version) - improved with search + FPS/Ping + Keybind
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

-- ---------- Utility: gradient ----------
local function gradient(text, startColor, endColor)
    local len = #text
    if len == 0 then return text end
    local r1,g1,b1 = startColor.R * 255, startColor.G * 255, startColor.B * 255
    local r2,g2,b2 = endColor.R * 255, endColor.G * 255, endColor.B * 255
    local tparts = table.create(len)
    for i = 1, len do
        local t = (i - 1) / math.max(len - 1, 1)
        local r = math.floor(r1 + (r2 - r1) * t)
        local g = math.floor(g1 + (g2 - g1) * t)
        local b = math.floor(b1 + (b2 - b1) * t)
        tparts[i] = string.format('<font color="rgb(%d,%d,%d)">%s</font>', r, g, b, text:sub(i,i))
    end
    return table.concat(tparts)
end

-- ---------- Popup Welcome ----------
local Confirmed = false
WindUI:Popup({
    Title = "Welcome to ro-archive!",
    Icon = "rbxassetid://129260712070622",
    IconThemed = true,
    Content = "Welcome to the " .. gradient("ro-archive", Color3.fromRGB(0,255,135), Color3.fromRGB(96,239,255)) .. ".\nScripts may auto-close the UI!",
    Buttons = {
        { Title = "Close", Variant = "Secondary", Callback = function() end },
        { Title = "Continue", Icon = "arrow-right", Variant = "Primary", Callback = function() Confirmed = true end }
    }
})
repeat task.wait() until Confirmed

-- ---------- Create Main Window ----------
local Window = WindUI:CreateWindow({
    Title = "ro-archive",
    Icon = "archive",
    Author = "sdwird",
    Folder = "CloudHub",
    Size = UDim2.fromOffset(580, 460),
    Transparent = true,
    Theme = "Dark",
    SideBarWidth = 200,
    ScrollBarEnabled = true,
    KeySystem = {
        Key = { "1234" },
        Note = "The key is 1234",
        SaveKey = false,
    },
    User = { Enabled = true, Anonymous = true }
})

-- default toggle key (can be changed via settings keybind)
local defaultToggleKey = Enum.KeyCode.H
Window:SetToggleKey(defaultToggleKey)

Window:CreateTopbarButton("Info", "info", function()
    WindUI:Notify({ Title = "ro-archive", Content = "Made by sdwird", Duration = 5 })
end, 998)

-- ---------- Homepage ----------
local HomeTab = Window:Tab({ Title = "Homepage", Icon = "house" })
HomeTab:Paragraph({
    Title = "enjoy being a dickhead",
    Desc = "wassup exploiter"
})
HomeTab:Button({
    Title = "Close ui",
    Icon = "eye-off",
    Callback = function() Window:Toggle() end
})

-- ---------- Scripts data (single source of truth) ----------
local scriptsList = {
    {
        Title = "Zenware Crim Aimlock",
        Desc = "Key: NewSigmaSigmaBoy",
        Icon = "target",
        Url = "https://raw.githubusercontent.com/sdwird/ro-archive/refs/heads/main/zenware-criminality.lua",
        After = function() setclipboard("NewSigmaSigmaBoy") end
    },
    {
        Title = "Demonology ESP",
        Icon = "eye",
        Url = "https://raw.githubusercontent.com/sdwird/ro-archive/refs/heads/main/demonology-esp.lua"
    },
    {
        Title = "Build A Boat Script",
        Icon = "anchor",
        Url = "https://raw.githubusercontent.com/sdwird/ro-archive/refs/heads/main/babft-asu.lua"
    },
}

local function safeLoad(url)
    local ok, res = pcall(function() return game:HttpGet(url, true) end)
    if ok and res and #res > 0 then
        local ok2, err = pcall(loadstring(res))
        if not ok2 then
            warn("Failed executing script from URL:", url, err)
        end
    else
        warn("Failed fetching URL:", url)
    end
end

-- ---------- Scripts Tab (with Search Input) ----------
local ScriptsTab = Window:Tab({ Title = "Scripts", Icon = "book-text" })

ScriptsTab:Input({
    Title = "Search scripts",
    Placeholder = "Type script name and press Enter...",
    Callback = function(value)
        if not value or value == "" then
            WindUI:Notify({ Title = "Search", Content = "Type something to search.", Duration = 3 })
            return
        end

        local q = value:lower()
        local matches = {}
        for _, s in ipairs(scriptsList) do
            if s.Title:lower():find(q) or (s.Desc and s.Desc:lower():find(q)) then
                table.insert(matches, s)
            end
        end

        if #matches == 0 then
            WindUI:Notify({ Title = "Search", Content = "No scripts found for: " .. value, Duration = 4 })
            return
        end

        local buttons = {}
        for i = 1, math.min(6, #matches) do
            local s = matches[i]
            table.insert(buttons, {
                Title = s.Title,
                Desc = s.Desc or "",
                Icon = s.Icon or "",
                Callback = function()
                    if s.After then
                        pcall(s.After)
                    end
                    safeLoad(s.Url)
                end
            })
        end

        WindUI:Popup({
            Title = "Search results (" .. tostring(#matches) .. ")",
            Content = "Click a result to execute it.",
            Buttons = buttons
        })
    end
})

for _, s in ipairs(scriptsList) do
    ScriptsTab:Button({
        Title = s.Title,
        Desc = s.Desc,
        Icon = s.Icon,
        Callback = function()
            if s.After then pcall(s.After) end
            safeLoad(s.Url)
        end
    })
end

-- ---------- Universal Tab ----------
local UniversalTab = Window:Tab({ Title = "Universal", Icon = "globe" })
UniversalTab:Button({
    Title = "Infinite Yield",
    Icon = "terminal",
    Callback = function()
        safeLoad("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source")
    end
})

-- ---------- Hubs Tab ----------
local HubsTab = Window:Tab({ Title = "Hubs", Icon = "grid" })
HubsTab:Button({ Title = "Skibidi Solara Hub (Orion)", Icon = "zap", Callback = function()
    safeLoad("https://raw.githubusercontent.com/sdwird/ro-archive/refs/heads/main/skibidi-solara-hub.lua")
end })
HubsTab:Button({ Title = "Skibidi Solara Hub (Auto Detect)", Icon = "radar", Callback = function()
    safeLoad("https://raw.githubusercontent.com/sdwird/ro-archive/refs/heads/main/skibidihub-rayfield")
end })
HubsTab:Button({ Title = "Solara hub", Icon = "folder-open", Callback = function()
    safeLoad("https://raw.githubusercontent.com/sdwird/ro-archive/refs/heads/main/solara-hub.lua")
end })

-- ---------- Settings Tab (renamed to "UI" as you requested) ----------
local SettingsTab = Window:Tab({ Title = "UI", Icon = "settings" })
local HttpService = game:GetService("HttpService")
local folderPath = "WindUI"
pcall(function() makefolder(folderPath) end)

local cfgFile = "archive_config"

local function SaveFile(name, data)
    local ok, err = pcall(function()
        writefile(folderPath .. "/" .. name .. ".json", HttpService:JSONEncode(data))
    end)
    if not ok then warn("Failed saving config:", err) end
end
local function LoadFile(name)
    local path = folderPath .. "/" .. name .. ".json"
    if isfile(path) then
        local ok, data = pcall(function() return HttpService:JSONDecode(readfile(path)) end)
        if ok then return data end
    end
    return nil
end

-- Theme selector
local themeNames = {}
for name in pairs(WindUI:GetThemes()) do table.insert(themeNames, name) end
SettingsTab:Dropdown({
    Title = "Select Theme",
    Values = themeNames,
    Value = WindUI:GetCurrentTheme(),
    Callback = function(theme) WindUI:SetTheme(theme) end
})

-- Window Transparency toggle
SettingsTab:Toggle({
    Title = "Window Transparency",
    Value = WindUI:GetTransparency(),
    Callback = function(state) Window:ToggleTransparency(state) end
})

-- Keybind to change UI toggle key (uses WindUI Keybind example)
local currentKey = "H"
SettingsTab:Keybind({
    Flag = "UIToggleKeybind",
    Title = "Toggle UI Key",
    Desc = "Set a key to open/close UI (default H)",
    Value = currentKey,
    Callback = function(v)
        currentKey = v
        local ok, enum = pcall(function() return Enum.KeyCode[v] end)
        if ok and enum then
            Window:SetToggleKey(enum)
            WindUI:Notify({ Title = "Keybind", Content = "Toggle key set to: " .. tostring(v), Duration = 3 })
        else
            warn("Invalid Key:", v)
        end
    end
})

-- ---------- HUD (FPS/Ping/Memory/Instances) ----------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- create HUD once (but don't parent yet)
local UserInputService = game:GetService("UserInputService")
local function createHudGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "roArchiveStatsHud"
    screenGui.ResetOnSpawn = false

    local frame = Instance.new("Frame")
    frame.Name = "StatsFrame"
    frame.Size = UDim2.fromOffset(260, 40)
    frame.Position = UDim2.new(0.02, 0, 0.02, 0)
    frame.AnchorPoint = Vector2.new(0,0)
    -- make HUD background fully transparent per user request
    frame.BackgroundTransparency = 1
    frame.BackgroundColor3 = Color3.fromRGB(18,18,18)
    frame.BorderSizePixel = 0
    frame.ZIndex = 9999
    frame.Parent = screenGui

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = frame

    local label = Instance.new("TextLabel")
    label.Name = "StatsLabel"
    label.Size = UDim2.fromScale(1,1)
    label.Position = UDim2.fromOffset(0,0)
    label.BackgroundTransparency = 1
    label.TextScaled = false
    label.Font = Enum.Font.GothamSemibold
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.TextYAlignment = Enum.TextYAlignment.Center
    label.TextColor3 = Color3.fromRGB(255,255,255)
    label.RichText = true
    label.Text = "FPS: -- | Ping: -- ms"
    label.Parent = frame

    -- drag: use mouse location for consistent behavior
    local dragging = false
    local dragStart, startPos
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = UserInputService:GetMouseLocation()
            startPos = frame.Position
            -- ensure dragging stops when mouse button released
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            -- handled in Heartbeat below
        end
    end)
    RunService.Heartbeat:Connect(function()
        if dragging and dragStart and startPos then
            local mouseLoc = UserInputService:GetMouseLocation()
            local delta = mouseLoc - dragStart
            local screenW, screenH = workspace.CurrentCamera.ViewportSize.X, workspace.CurrentCamera.ViewportSize.Y
            local newX = startPos.X.Scale + (delta.X / screenW)
            local newY = startPos.Y.Scale + (delta.Y / screenH)
            frame.Position = UDim2.new(math.clamp(newX, 0, 1), 0, math.clamp(newY, 0, 1), 0)
        end
    end)

    return screenGui, label, frame
end

local function getPingMs()
    local ok, stats = pcall(function() return game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue() end)
    if ok and type(stats) == "number" and stats > 0 then
        return math.floor(stats + 0.5)
    end
    local ok2, ping = pcall(function() return LocalPlayer and LocalPlayer:GetNetworkPing() end)
    if ok2 and type(ping) == "number" then
        return math.floor(ping * 1000 + 0.5)
    end
    return 0
end

local hudGui, statsLabel, hudFrame = createHudGui()
local hudParented = false
local hudRunning = false
local avgDt = 0
local hudAccum = 0

local HUD_SETTINGS = {
    HUDEnabled = false,
    ShowMemory = true,
    ShowInstances = false,
    InstanceSampleRate = 2.0
    ,ShowFPS = true,
    ShowPing = true,
    -- 0 = update every frame; >0 = minimum seconds between HUD updates
    UpdateInterval = 0
}

-- keep HUD visible when WindUI toggles
local KEEP_HUD_VISIBLE = true

-- Colors (defaults)
HUD_SETTINGS.AccentColor = Color3.fromRGB(255, 255, 255) -- used for FPS label accent
HUD_SETTINGS.PingColor = Color3.fromRGB(180, 180, 255)
HUD_SETTINGS.MemColor = Color3.fromRGB(180, 255, 180)
HUD_SETTINGS.InstColor = Color3.fromRGB(255, 200, 120)
HUD_SETTINGS.BGColor = Color3.fromRGB(18,18,18)

local lastInstanceSample = 0
local instanceCount = 0

local function composeHudText(fps, instFps, ping, memMB, instances)
    local parts = {}
    local function rgb(c)
        return math.floor(c.R * 255 + 0.5), math.floor(c.G * 255 + 0.5), math.floor(c.B * 255 + 0.5)
    end
    local ar,ag,ab = rgb(HUD_SETTINGS.AccentColor)
    local pr,pg,pb = rgb(HUD_SETTINGS.PingColor)
    local mr,mg,mb = rgb(HUD_SETTINGS.MemColor)
    local ir,ig,ib = rgb(HUD_SETTINGS.InstColor)
    if HUD_SETTINGS.ShowFPS then
        table.insert(parts, string.format('<font color="rgb(%d,%d,%d)"><b>FPS:</b> %d</font>', ar,ag,ab, fps))
        table.insert(parts, string.format('<font color="rgb(%d,%d,%d)">(<i>inst:%d</i>)</font>', 200,200,200, instFps))
    end
    if HUD_SETTINGS.ShowPing then
        table.insert(parts, string.format('<font color="rgb(%d,%d,%d)"><b>Ping:</b> %dms</font>', pr,pg,pb, ping))
    end
    if HUD_SETTINGS.ShowMemory and memMB then
        table.insert(parts, string.format('<font color="rgb(%d,%d,%d)"><b>Mem:</b> %.2fMB</font>', mr,mg,mb, memMB))
    end
    if HUD_SETTINGS.ShowInstances and instances then
        table.insert(parts, string.format('<font color="rgb(%d,%d,%d)"><b>Inst:</b> %d</font>', ir,ig,ib, instances))
    end
    return table.concat(parts, '  |  ')
end

local hudUpdateConn
local function startHud()
    if hudParented then return end
    hudGui.Parent = (LocalPlayer and LocalPlayer:FindFirstChild("PlayerGui")) or game:GetService("CoreGui")
    hudParented = true
    hudRunning = true
    HUD_SETTINGS.HUDEnabled = true

    hudUpdateConn = RunService.RenderStepped:Connect(function(dt)
        -- always update smoothing accumulator for FPS
        avgDt = (avgDt * 0.85) + (dt * 0.15)
        hudAccum = hudAccum + dt

        -- if UpdateInterval is 0, update every frame; otherwise wait until accumulator exceeds interval
        if HUD_SETTINGS.UpdateInterval <= 0 or hudAccum >= HUD_SETTINGS.UpdateInterval then
            local smoothedFps = math.floor(1 / math.max(0.0001, avgDt) + 0.5)
            local instFps = math.floor(1 / math.max(0.0001, dt) + 0.5)
            local ping = HUD_SETTINGS.ShowPing and getPingMs() or 0
            local memKB = collectgarbage("count") or 0
            local memMB = memKB / 1024

            -- advance instance sample timer by the elapsed time since last HUD update
            lastInstanceSample = lastInstanceSample + hudAccum
            if HUD_SETTINGS.ShowInstances and lastInstanceSample >= HUD_SETTINGS.InstanceSampleRate then
                lastInstanceSample = 0
                local ok, count = pcall(function() return #game:GetDescendants() end)
                if ok and type(count) == "number" then
                    instanceCount = count
                end
            end

            statsLabel.Text = composeHudText(smoothedFps, instFps, ping, memMB, instanceCount)
            hudAccum = 0
        end
    end)
end

local function stopHud()
    if hudUpdateConn then
        hudUpdateConn:Disconnect()
        hudUpdateConn = nil
    end
    if hudGui and hudGui.Parent then
        hudGui.Parent = nil
    end
    hudParented = false
    hudRunning = false
    HUD_SETTINGS.HUDEnabled = false
end

SettingsTab:Toggle({
    Title = "Show FPS & Ping HUD",
    Value = HUD_SETTINGS.HUDEnabled,
    Callback = function(state)
        if state then startHud() else stopHud() end
    end
})

SettingsTab:Toggle({
    Title = "Show Memory Usage (MB)",
    Value = HUD_SETTINGS.ShowMemory,
    Callback = function(state)
        HUD_SETTINGS.ShowMemory = state
    end
})

SettingsTab:Toggle({
    Title = "Show Instance Count",
    Value = HUD_SETTINGS.ShowInstances,
    Callback = function(state)
        HUD_SETTINGS.ShowInstances = state
    end
})

-- allow toggling FPS / Ping display independently
pcall(function()
    SettingsTab:Toggle({
        Title = "Show FPS",
        Value = HUD_SETTINGS.ShowFPS,
        Callback = function(state)
            HUD_SETTINGS.ShowFPS = state
        end
    })
end)

pcall(function()
    SettingsTab:Toggle({
        Title = "Show Ping",
        Value = HUD_SETTINGS.ShowPing,
        Callback = function(state)
            HUD_SETTINGS.ShowPing = state
        end
    })
end)

-- ---------- FPS Tab (controls & quick actions) ----------
local FpsTab = Window:Tab({ Title = "FPS", Icon = "zap" })

FpsTab:Paragraph({ Title = "HUD", Desc = "Controls for the FPS/Ping HUD." })
FpsTab:Toggle({
    Title = "Keep HUD visible when UI hidden",
    Value = true,
    Callback = function(state)
        -- if false, hiding the window will not affect HUD (we by default keep HUD independent)
        KEEP_HUD_VISIBLE = state
    end
})

FpsTab:Button({ Title = "Show HUD", Callback = function() startHud() end })
FpsTab:Button({ Title = "Hide HUD", Callback = function() stopHud() end })
FpsTab:Button({ Title = "Reset Instance Count", Callback = function() instanceCount = 0 WindUI:Notify({ Title = "FPS", Content = "Instance count reset", Duration = 2 }) end })
FpsTab:Button({ Title = "Reset HUD Position", Callback = function()
    if hudFrame then hudFrame.Position = UDim2.new(0.02,0,0.02,0) end
    WindUI:Notify({ Title = "FPS", Content = "HUD position reset", Duration = 2 })
end })

-- Slider: HUD update interval (seconds)
pcall(function()
    FpsTab:Slider({
        Flag = "HUD_UpdateInterval",
        Title = "HUD Update Interval (s)",
        Desc = "0 = every frame; larger = fewer updates",
        Value = { Min = 0, Max = 1, Default = HUD_SETTINGS.UpdateInterval },
        Step = 0.01,
        Callback = function(val)
            HUD_SETTINGS.UpdateInterval = tonumber(val) or 0
            WindUI:Notify({ Title = "HUD", Content = "Update interval set to " .. tostring(HUD_SETTINGS.UpdateInterval) .. "s", Duration = 2 })
        end
    })
end)

-- Color pickers for HUD
FpsTab:Colorpicker({
    Flag = "HUD_AccentColor",
    Title = "Accent Color",
    Desc = "Color for FPS text accent",
    Default = HUD_SETTINGS.AccentColor,
    Transparency = 0,
    Callback = function(color)
        HUD_SETTINGS.AccentColor = color
    end
})

FpsTab:Colorpicker({
    Flag = "HUD_BackgroundColor",
    Title = "HUD Background",
    Desc = "Background color for HUD frame",
    Default = HUD_SETTINGS.BGColor,
    Transparency = 40,
    Callback = function(color)
        HUD_SETTINGS.BGColor = color
        if hudFrame then hudFrame.BackgroundColor3 = color end
    end
})


-- ---------- Save / Load Buttons (keep functionality, but include new fields) ----------
SettingsTab:Button({
    Title = "Save Settings",
    Callback = function()
        local hudPos = nil
        if hudFrame then
            local p = hudFrame.Position
            hudPos = { XScale = p.X.Scale, XOffset = p.X.Offset, YScale = p.Y.Scale, YOffset = p.Y.Offset }
        end
        SaveFile(cfgFile, {
            Theme = WindUI:GetCurrentTheme(),
            Transparent = WindUI:GetTransparency(),
            UIToggleKey = tostring(currentKey),
            HUDEnabled = hudRunning,
            HUD_ShowMemory = HUD_SETTINGS.ShowMemory,
            HUD_ShowInstances = HUD_SETTINGS.ShowInstances,
            HUD_ShowFPS = HUD_SETTINGS.ShowFPS,
            HUD_ShowPing = HUD_SETTINGS.ShowPing,
            HUD_UpdateInterval = HUD_SETTINGS.UpdateInterval,
            HUD_Position = hudPos,
            HUD_KeepVisible = KEEP_HUD_VISIBLE,
            HUD_AccentColor = { math.floor(HUD_SETTINGS.AccentColor.R * 255 + 0.5), math.floor(HUD_SETTINGS.AccentColor.G * 255 + 0.5), math.floor(HUD_SETTINGS.AccentColor.B * 255 + 0.5) },
            HUD_BackgroundColor = { math.floor(HUD_SETTINGS.BGColor.R * 255 + 0.5), math.floor(HUD_SETTINGS.BGColor.G * 255 + 0.5), math.floor(HUD_SETTINGS.BGColor.B * 255 + 0.5) }
        })

        WindUI:Notify({ Title = "Saved", Content = "Settings saved", Duration = 3 })
    end
})

SettingsTab:Button({
    Title = "Load Settings",
    Callback = function()
        local data = LoadFile(cfgFile)
        if data then
            if data.Theme then WindUI:SetTheme(data.Theme) end
            if data.Transparent ~= nil then Window:ToggleTransparency(data.Transparent) end
            if data.UIToggleKey then
                local keyname = tostring(data.UIToggleKey)
                pcall(function()
                    Window:SetToggleKey(Enum.KeyCode[keyname])
                end)
            end
            if data.HUDEnabled then startHud() else stopHud() end
            if data.HUD_ShowMemory ~= nil then HUD_SETTINGS.ShowMemory = data.HUD_ShowMemory end
            if data.HUD_ShowInstances ~= nil then HUD_SETTINGS.ShowInstances = data.HUD_ShowInstances end
            if data.HUD_ShowFPS ~= nil then HUD_SETTINGS.ShowFPS = data.HUD_ShowFPS end
            if data.HUD_ShowPing ~= nil then HUD_SETTINGS.ShowPing = data.HUD_ShowPing end
            if data.HUD_UpdateInterval ~= nil then HUD_SETTINGS.UpdateInterval = tonumber(data.HUD_UpdateInterval) or HUD_SETTINGS.UpdateInterval end
                if data.HUD_Position and hudFrame then
                    local p = data.HUD_Position
                    local ok, err = pcall(function()
                        hudFrame.Position = UDim2.new(p.XScale or 0.02, p.XOffset or 0, p.YScale or 0.02, p.YOffset or 0)
                    end)
                    if not ok then warn("Failed to apply HUD position", err) end
                end
                if data.HUD_KeepVisible ~= nil then KEEP_HUD_VISIBLE = data.HUD_KeepVisible end
                if data.HUD_AccentColor and type(data.HUD_AccentColor) == "table" then
                    local c = data.HUD_AccentColor
                    HUD_SETTINGS.AccentColor = Color3.fromRGB(c[1] or 255, c[2] or 255, c[3] or 255)
                end
                if data.HUD_BackgroundColor and type(data.HUD_BackgroundColor) == "table" then
                    local c = data.HUD_BackgroundColor
                    HUD_SETTINGS.BGColor = Color3.fromRGB(c[1] or 18, c[2] or 18, c[3] or 18)
                    if hudFrame then hudFrame.BackgroundColor3 = HUD_SETTINGS.BGColor end
                end
            WindUI:Notify({ Title = "Loaded", Content = "Settings loaded", Duration = 3 })
        else
            WindUI:Notify({ Title = "Load", Content = "No saved config found.", Duration = 3 })
        end
    end
})

-- ---------- Close Event ----------
Window:OnClose(function()
    -- Do NOT automatically stop the HUD when the WindUI window is closed/toggled
    -- This keeps the FPS/Ping HUD visible even if the main UI is hidden with the toggle key.
    print("ro-archive closed.")
end)
